import{r as o,j as e,b as d}from"./app-C3a66WyG.js";import{N as D}from"./Navbar-3ZeXAoa3.js";import{C as F,R as l,a as c,F as A}from"./Row-CBLKDqQb.js";import{d as L,f as E,a as R}from"./dubai-1WBGI7KM.js";const S="/build/assets/bg25-Oy8WnnqA.jpg",T="/build/assets/heart-default-CIVAMNYc.png",B="/build/assets/heart-filled-Ck3qAr2L.png";function M({route:s}){var g,f;const{image:m,title:h,destination_country:y,destination_city:N,description:k,budget:v,days:b,stops:x}=s,j=Array.isArray(x)?x.map(a=>({places:a})):[];console.log(s);const[p,n]=o.useState([]),[u,w]=o.useState(!1),_=()=>{w(!u)};o.useEffect(()=>{(async()=>{try{const t=(await d.get("/saved-routes")).data.map(i=>i.route_id);n(t)}catch(r){console.error("Error fetching saved routes:",r)}})()},[]);const C=async a=>{const r=p.includes(a);try{r?(n(t=>t.filter(i=>i!==a)),await d.delete(`/saved-routes/${a}`)):(n(t=>[...t,a]),await d.post("/saved-routes",{route_id:a}))}catch(t){console.error("Error toggling favorite:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"route-detail-hero",style:{backgroundImage:`url(${S})`},children:[e.jsx("div",{className:"route-detail-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("p",{className:"hero-subtitle py-3",children:"ROUTE DETAIL"}),e.jsx("h1",{className:"hero-title py-2",children:h}),e.jsx("p",{className:"hero-description py-1",children:"This is the individual route page where you can see full details, like the route, and check out user reviews."})]})]}),e.jsx("main",{children:e.jsxs(F,{className:"py-5",children:[e.jsxs(l,{className:"route-info-section",children:[e.jsx(c,{md:5,children:e.jsx("img",{src:m?`/storage/${m}`:L,alt:"Route",className:"route-detail-image w-100"})}),e.jsxs(c,{md:7,className:"d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"route-title mb-0",children:h}),e.jsx("span",{className:"bookmark-circle",title:"Add to favorites",onClick:()=>C(s.id),children:e.jsx("img",{src:p.includes(s.id)?E:R,alt:"bookmark"})})]}),e.jsxs("p",{className:"route-meta",children:["Created by ",e.jsx("strong",{children:((g=s.user)==null?void 0:g.name)??"Unknown"})," on"," ",(f=s.user)!=null&&f.created_at?new Date(s.user.created_at).toLocaleDateString():"Unknown date"]}),s.updated_at&&s.created_at&&s.updated_at!==s.created_at&&e.jsxs("p",{className:"route-meta",children:["Last updated: ",new Date(s.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"route-details-list",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",y]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",N]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," â‚¬",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Days:"})," ",b]})]})]}),e.jsxs("div",{className:"like-section mt-auto align-self-end d-flex align-items-center",children:[e.jsx("span",{className:"like-text me-3",children:"Liked: "}),e.jsx("img",{src:u?B:T,alt:"like icon",className:"like-icon",onClick:_,style:{cursor:"pointer"}})]})]})]}),e.jsx(l,{className:"mt-4",children:e.jsx(l,{className:"mt-4",children:e.jsx(c,{children:e.jsx("p",{className:"route-description-full",children:k})})})}),e.jsx("hr",{className:"my-5"}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"daily-stops-heading",children:"Daily Stops"}),e.jsx(l,{className:"daily-stops-row",children:j.map((a,r)=>e.jsx(c,{md:4,className:"mb-4",children:e.jsxs("div",{className:"day-card p-3 h-100",children:[e.jsxs("h5",{className:"mb-3",children:["Day ",r+1]}),e.jsx("ul",{children:Array.isArray(a.places)&&a.places.map((t,i)=>e.jsx("li",{children:t},i))})]})},r))})]})]})}),e.jsx(A,{})]})}export{M as default};
