import{r as l,j as s,J as F,b as u}from"./app-C3a66WyG.js";import{f as H,a as S,d as I}from"./dubai-1WBGI7KM.js";import{c as i,u as n,a as b}from"./Row-CBLKDqQb.js";const N=a=>l.forwardRef((e,t)=>s.jsx("div",{...e,ref:t,className:i(e.className,a)})),x=l.forwardRef(({className:a,bsPrefix:e,as:t="div",...o},r)=>(e=n(e,"card-body"),s.jsx(t,{ref:r,className:i(a,e),...o})));x.displayName="CardBody";const p=l.forwardRef(({className:a,bsPrefix:e,as:t="div",...o},r)=>(e=n(e,"card-footer"),s.jsx(t,{ref:r,className:i(a,e),...o})));p.displayName="CardFooter";const v=l.createContext(null);v.displayName="CardHeaderContext";const j=l.forwardRef(({bsPrefix:a,className:e,as:t="div",...o},r)=>{const c=n(a,"card-header"),d=l.useMemo(()=>({cardHeaderBsPrefix:c}),[c]);return s.jsx(v.Provider,{value:d,children:s.jsx(t,{ref:r,...o,className:i(e,c)})})});j.displayName="CardHeader";const h=l.forwardRef(({bsPrefix:a,className:e,variant:t,as:o="img",...r},c)=>{const d=n(a,"card-img");return s.jsx(o,{ref:c,className:i(t?`${d}-${t}`:d,e),...r})});h.displayName="CardImg";const g=l.forwardRef(({className:a,bsPrefix:e,as:t="div",...o},r)=>(e=n(e,"card-img-overlay"),s.jsx(t,{ref:r,className:i(a,e),...o})));g.displayName="CardImgOverlay";const y=l.forwardRef(({className:a,bsPrefix:e,as:t="a",...o},r)=>(e=n(e,"card-link"),s.jsx(t,{ref:r,className:i(a,e),...o})));y.displayName="CardLink";const E=N("h6"),C=l.forwardRef(({className:a,bsPrefix:e,as:t=E,...o},r)=>(e=n(e,"card-subtitle"),s.jsx(t,{ref:r,className:i(a,e),...o})));C.displayName="CardSubtitle";const k=l.forwardRef(({className:a,bsPrefix:e,as:t="p",...o},r)=>(e=n(e,"card-text"),s.jsx(t,{ref:r,className:i(a,e),...o})));k.displayName="CardText";const A=N("h5"),w=l.forwardRef(({className:a,bsPrefix:e,as:t=A,...o},r)=>(e=n(e,"card-title"),s.jsx(t,{ref:r,className:i(a,e),...o})));w.displayName="CardTitle";const R=l.forwardRef(({bsPrefix:a,className:e,bg:t,text:o,border:r,body:c=!1,children:d,as:f="div",...$},T)=>{const B=n(a,"card");return s.jsx(f,{ref:T,...$,className:i(e,B,t&&`bg-${t}`,o&&`text-${o}`,r&&`border-${r}`),children:c?s.jsx(x,{children:d}):d})});R.displayName="Card";const m=Object.assign(R,{Img:h,Title:w,Subtitle:C,Body:x,Link:y,Text:k,Header:j,Footer:p,ImgOverlay:g}),D="/build/assets/heart-8iC9_XJY.png";function _({route:a}){const[e,t]=l.useState([]);l.useEffect(()=>{(async()=>{try{const d=(await u.get("/saved-routes")).data.map(f=>f.route_id);t(d)}catch(c){console.error("Error fetching saved routes:",c)}})()},[]);const o=async r=>{const c=e.includes(r);try{c?(t(d=>d.filter(f=>f!==r)),await u.delete(`/saved-routes/${r}`),console.log("Route removed successfully")):(t(d=>[...d,r]),await u.post("/saved-routes",{route_id:r}),console.log("Route saved successfully"))}catch(d){console.error("Error toggling favorite:",d)}};return s.jsx(b,{xs:"auto",children:s.jsx(F,{href:`/routes/${a.id}`,className:"text-decoration-none text-dark",children:s.jsxs(m,{className:"route-card shadow-sm position-relative mx-auto",children:[s.jsx("div",{className:"bookmark-icon",onClick:r=>{r.preventDefault(),o(a.id)},title:"Add to favorites",children:s.jsx("img",{src:e.includes(a.id)?H:S,alt:"bookmark"})}),s.jsx(m.Img,{variant:"top",src:a.image===null?I:`/storage/${a.image}`,alt:a.image===null?"No Image":a.title,className:"route-image"}),s.jsxs(m.Body,{className:"route-info",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[s.jsx(m.Title,{as:"h6",className:"mb-0 route-title-truncated",children:a.title}),s.jsxs("span",{className:"text-muted small flex-shrink-0",children:[a.days," Days"]})]}),s.jsx(m.Subtitle,{className:"mb-1 text-muted small",children:a.user?`by ${a.user.name}`:"Unknown Author"}),s.jsxs("div",{className:"d-flex justify-content-between align-items-start mt-2",children:[a.description?s.jsx(m.Text,{className:"route-description mb-0 flex-grow-1 me-2 text-truncate",children:a.description}):s.jsx("span",{className:"route-description text-muted small",children:"Â "}),s.jsxs("div",{className:"d-flex align-items-center likes-section ms-2",children:[s.jsx("img",{src:D,alt:"likes",className:"heart-icon me-1"}),s.jsx("span",{className:"small likes-count",children:a.likes})]})]})]})]})})},a.id)}export{_ as R};
