import{r as d,j as e,b as F}from"./app-CmlBVORu.js";import{N as g}from"./Navbar-DNPpU5Yv.js";import{C as P,R as u,a as m,F as S}from"./Row-BQ97jopK.js";import{B as h}from"./CreateRoute-B2mOl4Bw.js";import{i as _,a as k,b as G}from"./remove-ICyhTtfO.js";import{F as t}from"./Form-Crf71aN3.js";import{b as B}from"./bg20-BGXAX1YE.js";/* empty css                 */function T(){const[l,y]=d.useState({title:"",destination_country:"",destination_city:"",description:"",budget:"",days:""}),[o,c]=d.useState([]),[b,x]=d.useState(null),[v,j]=d.useState(!1),[p,N]=d.useState(null),f=a=>{a.target.files&&a.target.files[0]&&N(URL.createObjectURL(a.target.files[0]))},i=a=>{const{name:s,value:r}=a.target;if(y({...l,[s]:r}),s==="days"){const n=parseInt(r,10);!isNaN(n)&&n>0?(c(Array.from({length:n},()=>({places:[""],error:""}))),j(!0)):(c([]),j(!1))}},C=async a=>{var r;a.preventDefault();const s=new FormData;s.append("title",l.title),s.append("destination_country",l.destination_country),s.append("destination_city",l.destination_city),s.append("description",l.description),s.append("budget",l.budget),s.append("days",l.days),s.append("stops",JSON.stringify(o)),p&&s.append("image",document.getElementById("routeImage").files[0]);try{const n=await F.post("/routes",s,{headers:{"Content-Type":"multipart/form-data"}});console.log("Route created successfully:",n.data),alert("Route created successfully!"),window.location.href="/my-routes"}catch(n){console.error("Error creating route:",((r=n.response)==null?void 0:r.data)||n.message),alert("Failed to create route. Please try again.")}},D=(a,s,r)=>{const n=[...o];n[a].places[s]=r,r.trim()!==""&&(n[a].error=""),c(n)},R=a=>{const s=[...o];s[a].places[s[a].places.length-1].trim()!==""?(s[a].places.push(""),s[a].error=""):s[a].error="Please enter a place before adding another.",c(s)},w=(a,s)=>{const r=[...o];r[a].places.splice(s,1),c(r)},L=a=>{const s=[...o];s.splice(a,1),c(s)},E=()=>{c([...o,{places:[""],error:""}])};return e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsx("section",{className:"create-route-section py-5",children:e.jsxs(P,{children:[e.jsx("h2",{className:"text-center mb-4 section-title",children:"Create New Route"}),e.jsxs(t.Group,{className:"mb-4",children:[e.jsx(t.Label,{className:"upload-label",children:"Route Image"}),e.jsxs("div",{className:"custom-file-upload-wrapper",children:[e.jsx("input",{type:"file",accept:"image/*",id:"routeImage",onChange:f,className:"d-none"}),e.jsx("label",{htmlFor:"routeImage",className:"btn btn-upload-custom",children:"Upload Image"})]}),p&&e.jsx("div",{className:"upload-preview mt-3",children:e.jsx("img",{src:p,alt:"Route Preview"})})]}),e.jsxs(t,{onSubmit:C,className:"route-form",children:[e.jsxs(t.Group,{className:"mb-4",children:[e.jsx(t.Label,{children:"Route Title"}),e.jsx(t.Control,{type:"text",name:"title",placeholder:"Enter route title",value:l.title,onChange:i})]}),e.jsxs(u,{className:"mb-4",children:[e.jsx(m,{md:6,children:e.jsxs(t.Group,{children:[e.jsx(t.Label,{children:"Country"}),e.jsx(t.Control,{type:"text",name:"destination_country",placeholder:"Enter country",value:l.destination_country,onChange:i})]})}),e.jsx(m,{md:6,children:e.jsxs(t.Group,{children:[e.jsx(t.Label,{children:"City"}),e.jsx(t.Control,{type:"text",name:"destination_city",placeholder:"Enter city",value:l.destination_city,onChange:i})]})})]}),e.jsxs(t.Group,{className:"mb-4",children:[e.jsx(t.Label,{children:"Description"}),e.jsx(t.Control,{as:"textarea",name:"description",placeholder:"Describe your route",rows:4,value:l.description,onChange:i})]}),e.jsxs(u,{className:"mb-4",children:[e.jsx(m,{md:6,children:e.jsxs(t.Group,{children:[e.jsx(t.Label,{children:"Budget (â‚¬)"}),e.jsx(t.Control,{type:"number",name:"budget",placeholder:"e.g. 500",value:l.budget,onChange:i})]})}),e.jsx(m,{md:6,children:e.jsxs(t.Group,{children:[e.jsx(t.Label,{children:"Number of Days"}),e.jsx(t.Control,{type:"number",name:"days",placeholder:"e.g. 7",value:l.days,onChange:i,readOnly:v})]})})]}),e.jsx("div",{className:`day-cards-wrapper ${o.length>0?"expand":"collapse"}`,children:o.length>0&&e.jsxs("div",{className:"day-cards-container fade-in-smooth",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Daily Plan"}),e.jsx(h,{variant:"dark",size:"sm",onClick:E,children:"Add Day"})]}),e.jsx(u,{children:o.map((a,s)=>e.jsx(m,{md:4,className:"mb-4 fade-in",children:e.jsxs("div",{className:"day-card p-3 d-flex flex-column",children:[e.jsxs("div",{className:"day-card-content",children:[e.jsxs("h5",{className:"text-center mb-3",children:["Day ",s+1]}),e.jsxs("div",{className:"places-input-group mb-2",children:[e.jsx(t.Control,{type:"text",placeholder:"e.g. Big Ben",value:a.places[a.places.length-1],onChange:r=>D(s,a.places.length-1,r.target.value)}),e.jsx("button",{className:"add-btn-img",type:"button",onClick:r=>{r.preventDefault(),R(s)},onMouseEnter:()=>x(s),onMouseLeave:()=>x(null),children:e.jsx("img",{src:b===s?_:k,alt:"Add",className:"add-icon"})})]}),e.jsx("div",{className:"error-text",children:a.error||" "}),e.jsx("div",{className:"added-places mt-3",children:a.places.slice(0,-1).map((r,n)=>e.jsxs("div",{className:"place-tag",children:[r,e.jsx("button",{className:"remove-btn-img",onClick:()=>w(s,n),children:e.jsx("img",{src:G,alt:"Remove",className:"remove-icon"})})]},n))})]}),e.jsx("div",{className:"text-end mt-3",children:e.jsx(h,{variant:"outline-danger",size:"sm",onClick:()=>L(s),children:"Delete Day"})})]})},s))})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(h,{variant:"success",type:"submit",className:"px-5",children:"Save Route"})})]})]})})]})}function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"my-routes-hero small-hero",style:{backgroundImage:`url(${B})`},children:[e.jsx("div",{className:"my-routes-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("h1",{className:"hero-title py-2",children:"CREATE YOUR ROUTE"}),e.jsx("p",{className:"hero-description py-1",children:"Add your destination, travel days, and budget to start building your route."})]})]}),e.jsx(T,{}),e.jsx(S,{})]})}export{Y as default};
