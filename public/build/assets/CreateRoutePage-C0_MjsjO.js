import{r as g,j as e,b as _}from"./app-C3a66WyG.js";import{N as C}from"./Navbar-3ZeXAoa3.js";import{u as E,c as k,C as B,R as N,a as y,F as S}from"./Row-CBLKDqQb.js";import{i as O,a as G,b as T}from"./remove-ICyhTtfO.js";import{F as r}from"./Form-BVW6qXrM.js";/* empty css                 */const $=["as","disabled"];function A(s,i){if(s==null)return{};var n={};for(var o in s)if({}.hasOwnProperty.call(s,o)){if(i.indexOf(o)>=0)continue;n[o]=s[o]}return n}function U(s){return!s||s.trim()==="#"}function D({tagName:s,disabled:i,href:n,target:o,rel:p,role:d,onClick:h,tabIndex:x=0,type:f}){s||(n!=null||o!=null||p!=null?s="a":s="button");const j={tagName:s};if(s==="button")return[{type:f||"button",disabled:i},j];const b=u=>{if((i||s==="a"&&U(n))&&u.preventDefault(),i){u.stopPropagation();return}h==null||h(u)},m=u=>{u.key===" "&&(u.preventDefault(),b(u))};return s==="a"&&(n||(n="#"),i&&(n=void 0)),[{role:d??"button",disabled:void 0,tabIndex:i?void 0:x,href:n,target:s==="a"?o:void 0,"aria-disabled":i||void 0,rel:s==="a"?p:void 0,onClick:b,onKeyDown:m},j]}const H=g.forwardRef((s,i)=>{let{as:n,disabled:o}=s,p=A(s,$);const[d,{tagName:h}]=D(Object.assign({tagName:n,disabled:o},p));return e.jsx(h,Object.assign({},p,d,{ref:i}))});H.displayName="Button";const v=g.forwardRef(({as:s,bsPrefix:i,variant:n="primary",size:o,active:p=!1,disabled:d=!1,className:h,...x},f)=>{const j=E(i,"btn"),[b,{tagName:m}]=D({tagName:s,disabled:d,...x}),u=m;return e.jsx(u,{...b,...x,ref:f,disabled:d,className:k(h,j,p&&"active",n&&`${j}-${n}`,o&&`${j}-${o}`,x.href&&d&&"disabled")})});v.displayName="Button";function K(){const[s,i]=g.useState({title:"",destination_country:"",destination_city:"",description:"",budget:"",days:""}),[n,o]=g.useState([]),[p,d]=g.useState(null),[h,x]=g.useState(!1),[f,j]=g.useState(null),b=a=>{a.target.files&&a.target.files[0]&&j(URL.createObjectURL(a.target.files[0]))},m=a=>{const{name:t,value:l}=a.target;if(i({...s,[t]:l}),t==="days"){const c=parseInt(l,10);!isNaN(c)&&c>0?(o(Array.from({length:c},()=>({places:[""],error:""}))),x(!0)):(o([]),x(!1))}},u=async a=>{var l;a.preventDefault();const t=new FormData;t.append("title",s.title),t.append("destination_country",s.destination_country),t.append("destination_city",s.destination_city),t.append("description",s.description),t.append("budget",s.budget),t.append("days",s.days),t.append("stops",JSON.stringify(n)),f&&t.append("image",document.getElementById("routeImage").files[0]);try{const c=await _.post("/routes",t,{headers:{"Content-Type":"multipart/form-data"}});console.log("Route created successfully:",c.data),alert("Route created successfully!")}catch(c){console.error("Error creating route:",((l=c.response)==null?void 0:l.data)||c.message),alert("Failed to create route. Please try again.")}},R=(a,t,l)=>{const c=[...n];c[a].places[t]=l,l.trim()!==""&&(c[a].error=""),o(c)},P=a=>{const t=[...n];t[a].places[t[a].places.length-1].trim()!==""?(t[a].places.push(""),t[a].error=""):t[a].error="Please enter a place before adding another.",o(t)},w=(a,t)=>{const l=[...n];l[a].places.splice(t,1),o(l)},L=a=>{const t=[...n];t.splice(a,1),o(t)},F=()=>{o([...n,{places:[""],error:""}])};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("section",{className:"create-route-section py-5",children:e.jsxs(B,{children:[e.jsx("h2",{className:"text-center mb-4 section-title",children:"Create New Route"}),e.jsxs(r.Group,{className:"mb-4",children:[e.jsx(r.Label,{className:"upload-label",children:"Route Image"}),e.jsxs("div",{className:"custom-file-upload-wrapper",children:[e.jsx("input",{type:"file",accept:"image/*",id:"routeImage",onChange:b,className:"d-none"}),e.jsx("label",{htmlFor:"routeImage",className:"btn btn-upload-custom",children:"Upload Image"})]}),f&&e.jsx("div",{className:"upload-preview mt-3",children:e.jsx("img",{src:f,alt:"Route Preview"})})]}),e.jsxs(r,{onSubmit:u,className:"route-form",children:[e.jsxs(r.Group,{className:"mb-4",children:[e.jsx(r.Label,{children:"Route Title"}),e.jsx(r.Control,{type:"text",name:"title",placeholder:"Enter route title",value:s.title,onChange:m})]}),e.jsxs(N,{className:"mb-4",children:[e.jsx(y,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"Country"}),e.jsx(r.Control,{type:"text",name:"destination_country",placeholder:"Enter country",value:s.destination_country,onChange:m})]})}),e.jsx(y,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"City"}),e.jsx(r.Control,{type:"text",name:"destination_city",placeholder:"Enter city",value:s.destination_city,onChange:m})]})})]}),e.jsxs(r.Group,{className:"mb-4",children:[e.jsx(r.Label,{children:"Description"}),e.jsx(r.Control,{as:"textarea",name:"description",placeholder:"Describe your route",rows:4,value:s.description,onChange:m})]}),e.jsxs(N,{className:"mb-4",children:[e.jsx(y,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"Budget (â‚¬)"}),e.jsx(r.Control,{type:"number",name:"budget",placeholder:"e.g. 500",value:s.budget,onChange:m})]})}),e.jsx(y,{md:6,children:e.jsxs(r.Group,{children:[e.jsx(r.Label,{children:"Number of Days"}),e.jsx(r.Control,{type:"number",name:"days",placeholder:"e.g. 7",value:s.days,onChange:m,readOnly:h})]})})]}),e.jsx("div",{className:`day-cards-wrapper ${n.length>0?"expand":"collapse"}`,children:n.length>0&&e.jsxs("div",{className:"day-cards-container fade-in-smooth",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Daily Plan"}),e.jsx(v,{variant:"dark",size:"sm",onClick:F,children:"Add Day"})]}),e.jsx(N,{children:n.map((a,t)=>e.jsx(y,{md:4,className:"mb-4 fade-in",children:e.jsxs("div",{className:"day-card p-3",children:[e.jsxs("h5",{className:"text-center mb-3",children:["Day ",t+1]}),e.jsxs("div",{className:"places-input-group mb-2",children:[e.jsx(r.Control,{type:"text",placeholder:"e.g. Big Ben",value:a.places[a.places.length-1],onChange:l=>R(t,a.places.length-1,l.target.value)}),e.jsx("button",{className:"add-btn-img",type:"button",onClick:l=>{l.preventDefault(),P(t)},onMouseEnter:()=>d(t),onMouseLeave:()=>d(null),children:e.jsx("img",{src:p===t?O:G,alt:"Add",className:"add-icon"})})]}),e.jsx("div",{className:"error-text",children:a.error||" "}),e.jsx("div",{className:"added-places mt-3",children:a.places.slice(0,-1).map((l,c)=>e.jsxs("div",{className:"place-tag",children:[l,e.jsx("button",{className:"remove-btn-img",onClick:()=>w(t,c),children:e.jsx("img",{src:T,alt:"Remove",className:"remove-icon"})})]},c))}),e.jsx("div",{className:"text-end mt-3",children:e.jsx(v,{variant:"outline-danger",size:"sm",onClick:()=>L(t),children:"Delete Day"})})]})},t))})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(v,{variant:"success",type:"submit",className:"px-5",children:"Save Route"})})]})]})})]})}const M="/build/assets/bg20-AQFX_9hL.jpg";function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsxs("div",{className:"my-routes-hero small-hero",style:{backgroundImage:`url(${M})`},children:[e.jsx("div",{className:"my-routes-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("h1",{className:"hero-title py-2",children:"CREATE YOUR ROUTE"}),e.jsx("p",{className:"hero-description py-1",children:"Add your destination, travel days, and budget to start building your route."})]})]}),e.jsx(K,{}),e.jsx(S,{})]})}export{Y as default};
