import{r as i,j as a,J as p,b as x}from"./app-BUkYBJdy.js";import{f as D,a as E,d as F}from"./dubai-1WBGI7KM.js";import{c,u as n,a as I}from"./Row-BD8xuxxM.js";const h=e=>i.forwardRef((s,t)=>a.jsx("div",{...s,ref:t,className:c(s.className,e)})),N=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...r},o)=>(s=n(s,"card-body"),a.jsx(t,{ref:o,className:c(e,s),...r})));N.displayName="CardBody";const j=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...r},o)=>(s=n(s,"card-footer"),a.jsx(t,{ref:o,className:c(e,s),...r})));j.displayName="CardFooter";const g=i.createContext(null);g.displayName="CardHeaderContext";const v=i.forwardRef(({bsPrefix:e,className:s,as:t="div",...r},o)=>{const l=n(e,"card-header"),d=i.useMemo(()=>({cardHeaderBsPrefix:l}),[l]);return a.jsx(g.Provider,{value:d,children:a.jsx(t,{ref:o,...r,className:c(s,l)})})});v.displayName="CardHeader";const y=i.forwardRef(({bsPrefix:e,className:s,variant:t,as:r="img",...o},l)=>{const d=n(e,"card-img");return a.jsx(r,{ref:l,className:c(t?`${d}-${t}`:d,s),...o})});y.displayName="CardImg";const C=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...r},o)=>(s=n(s,"card-img-overlay"),a.jsx(t,{ref:o,className:c(e,s),...r})));C.displayName="CardImgOverlay";const k=i.forwardRef(({className:e,bsPrefix:s,as:t="a",...r},o)=>(s=n(s,"card-link"),a.jsx(t,{ref:o,className:c(e,s),...r})));k.displayName="CardLink";const H=h("h6"),w=i.forwardRef(({className:e,bsPrefix:s,as:t=H,...r},o)=>(s=n(s,"card-subtitle"),a.jsx(t,{ref:o,className:c(e,s),...r})));w.displayName="CardSubtitle";const R=i.forwardRef(({className:e,bsPrefix:s,as:t="p",...r},o)=>(s=n(s,"card-text"),a.jsx(t,{ref:o,className:c(e,s),...r})));R.displayName="CardText";const S=h("h5"),$=i.forwardRef(({className:e,bsPrefix:s,as:t=S,...r},o)=>(s=n(s,"card-title"),a.jsx(t,{ref:o,className:c(e,s),...r})));$.displayName="CardTitle";const b=i.forwardRef(({bsPrefix:e,className:s,bg:t,text:r,border:o,body:l=!1,children:d,as:m="div",...u},T)=>{const B=n(e,"card");return a.jsx(m,{ref:T,...u,className:c(s,B,t&&`bg-${t}`,r&&`text-${r}`,o&&`border-${o}`),children:l?a.jsx(N,{children:d}):d})});b.displayName="Card";const f=Object.assign(b,{Img:y,Title:$,Subtitle:w,Body:N,Link:k,Text:R,Header:v,Footer:j,ImgOverlay:C}),A="/build/assets/heart-8iC9_XJY.png",O="/build/assets/delete-6qmEIWpD.png";function W({route:e,currentUser:s}){const[t,r]=i.useState([]);i.useEffect(()=>{(async()=>{try{const m=(await x.get("/saved-routes")).data.map(u=>u.route_id);r(m)}catch(d){console.error("Error fetching saved routes:",d)}})()},[]);const o=async l=>{const d=t.includes(l);try{d?(r(m=>m.filter(u=>u!==l)),await x.delete(`/saved-routes/${l}`),console.log("Route removed successfully")):(r(m=>[...m,l]),await x.post("/saved-routes",{route_id:l}),console.log("Route saved successfully"))}catch(m){console.error("Error toggling favorite:",m)}};return a.jsx(I,{xs:"auto",children:a.jsx(p,{href:`/routes/${e.id}`,className:"text-decoration-none text-dark",children:a.jsxs(f,{className:`route-card shadow-sm position-relative mx-auto ${s&&e.user&&s.id===e.user.id?"has-controls":""}`,children:[a.jsx("div",{className:"bookmark-icon",onClick:l=>{l.preventDefault(),o(e.id)},title:"Add to favorites",children:a.jsx("img",{src:t.includes(e.id)?D:E,alt:"bookmark"})}),a.jsx(f.Img,{variant:"top",src:e.image===null?F:`/storage/${e.image}`,alt:e.image===null?"No Image":e.title,className:"route-image"}),a.jsxs(f.Body,{className:"route-info",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx(f.Title,{as:"h6",className:"mb-0 route-title-truncated",children:e.title}),a.jsxs("span",{className:"text-muted small flex-shrink-0",children:[e.days," Days"]})]}),a.jsx(f.Subtitle,{className:"mb-1 text-muted small",children:e.user?`by ${e.user.name}`:"Unknown Author"}),a.jsxs("div",{className:"d-flex justify-content-between align-items-start mt-2",children:[e.description?a.jsx(f.Text,{className:"route-description mb-0 flex-grow-1 me-2 text-truncate",children:e.description}):a.jsx("span",{className:"route-description text-muted small",children:"Â "}),a.jsxs("div",{className:"d-flex align-items-center likes-section ms-2",children:[a.jsx("img",{src:A,alt:"likes",className:"heart-icon me-1"}),a.jsx("span",{className:"small likes-count",children:e.likes})]})]}),s&&e.user&&s.id===e.user.id&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 route-actions",children:[a.jsx(p,{href:`/routes/${e.id}/edit`,title:"Edit Route",className:"edit-button",onClick:l=>l.stopPropagation(),children:"Edit"}),a.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),confirm("Are you sure you want to delete this route?")},title:"Delete Route",className:"icon-button",children:a.jsx("img",{src:O,alt:"Delete",className:"action-icon"})})]})]})]})})},e.id)}export{W as R};
