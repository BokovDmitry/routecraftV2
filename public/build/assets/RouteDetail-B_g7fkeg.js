import{r as n,j as e,b as l}from"./app-B--xmqr1.js";import{N as F}from"./Navbar-izyo38WX.js";import{C as L,R as h,a as c,F as S}from"./Row-SUdHJtF2.js";import{d as R,f as T,a as $}from"./dubai-1WBGI7KM.js";const B="/build/assets/bg25-Oy8WnnqA.jpg",M="/build/assets/heart-default-CIVAMNYc.png",U="/build/assets/heart-filled-Ck3qAr2L.png";function W({route:a}){var y,k;const{image:m,title:u,destination_country:N,destination_city:v,description:b,budget:w,days:_,stops:x}=a,p=Array.isArray(x)?x.map(t=>({places:t})):[],[j,o]=n.useState([]),[C,g]=n.useState(!1),[D,f]=n.useState(!1),A=async t=>{try{const r=await l.post(`/routes/${t}/like`);g(r.data.liked)}catch(r){console.error("Error toggling like:",r)}};n.useEffect(()=>{f(!0);const t=async()=>{try{const s=await l.get(`/routes/${a.id}/liked-status`);g(s.data.liked)}catch(s){console.error("Error fetching liked status:",s)}},r=async()=>{try{const i=(await l.get("/saved-routes")).data.map(d=>d.route_id);o(i)}catch(s){return console.error("Error fetching saved routes:",s),()=>f(!1)}};t(),r()},[a.id]);const E=async t=>{const r=j.includes(t);try{r?(o(s=>s.filter(i=>i!==t)),await l.delete(`/saved-routes/${t}`)):(o(s=>[...s,t]),await l.post("/saved-routes",{route_id:t}))}catch(s){console.error("Error toggling favorite:",s)}};return e.jsxs(e.Fragment,{children:[e.jsx(F,{}),D&&e.jsxs("div",{className:"route-detail-hero",style:{backgroundImage:`url(${B})`},children:[e.jsx("div",{className:"route-detail-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("p",{className:"hero-subtitle py-3",children:"ROUTE DETAIL"}),e.jsx("h1",{className:"hero-title py-2",children:u}),e.jsx("p",{className:"hero-description py-1",children:"This is the individual route page where you can see full details, like the route, and check out user reviews."})]})]}),e.jsx("main",{children:e.jsxs(L,{className:"py-5",children:[e.jsxs(h,{className:"route-info-section",children:[e.jsx(c,{md:5,children:e.jsx("img",{src:m?`/storage/${m}`:R,alt:"Route",className:"route-detail-image w-100"})}),e.jsxs(c,{md:7,className:"d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"route-title mb-0",children:u}),e.jsx("span",{className:"bookmark-circle",title:"Add to favorites",onClick:()=>E(a.id),children:e.jsx("img",{src:j.includes(a.id)?T:$,alt:"bookmark"})})]}),e.jsxs("p",{className:"route-meta",children:["Created by"," ",e.jsx("strong",{children:((y=a.user)==null?void 0:y.name)??"Unknown"})," ","on"," ",(k=a.user)!=null&&k.created_at?new Date(a.user.created_at).toLocaleDateString():"Unknown date"]}),a.updated_at&&a.created_at&&a.updated_at!==a.created_at&&e.jsxs("p",{className:"route-meta",children:["Last updated:"," ",new Date(a.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"route-details-list",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",N]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," â‚¬",w]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Days:"})," ",_]})]})]}),e.jsxs("div",{className:"like-section mt-auto align-self-end d-flex align-items-center",children:[e.jsx("span",{className:"like-text me-3",children:"Liked: "}),e.jsx("img",{src:C?U:M,alt:"like icon",className:"like-icon",onClick:()=>A(a.id),style:{cursor:"pointer"}})]})]})]}),e.jsx(h,{className:"mt-4",children:e.jsx(c,{children:e.jsx("p",{className:"route-description-full",children:b})})}),e.jsx("hr",{className:"my-5"}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"daily-stops-heading",children:"Daily Stops"}),e.jsx(h,{className:"daily-stops-row",children:p.map((t,r)=>{const s=Array.isArray(t.places)?t.places.filter(i=>i.trim()!==""):[];return s.length===0?null:e.jsx(c,{md:4,className:"mb-4",children:e.jsxs("div",{className:"day-card p-3 h-100",children:[e.jsxs("h5",{className:"mb-3",children:["Day ",r+1]}),e.jsx("ul",{children:s.map((i,d)=>e.jsx("li",{children:i},d))})]})},r)})})]})]})}),e.jsx(S,{})]})}export{W as default};
