import{r as l,j as e,b as o}from"./app-7f27Eirg.js";import{N as A}from"./Navbar-Bojt_JPn.js";import{C as E,R as d,a as n,F as R}from"./Row-Arg6Fjyx.js";import{d as S,f as T,a as B}from"./dubai-1WBGI7KM.js";const M="/build/assets/bg25-Oy8WnnqA.jpg",U="/build/assets/heart-default-CIVAMNYc.png",$="/build/assets/heart-filled-Ck3qAr2L.png";function W({route:s}){var g,f;const{image:h,title:m,destination_country:y,destination_city:N,description:v,budget:k,days:b,stops:x}=s,u=Array.isArray(x)?x.map(a=>({places:a})):[],[j,c]=l.useState([]),[p,w]=l.useState(!1),[_,C]=l.useState(!1);l.useEffect(()=>{C(!0),(async()=>{try{const t=(await o.get("/saved-routes")).data.map(i=>i.route_id);c(t)}catch(r){console.error("Error fetching saved routes:",r)}})()},[]);const D=()=>w(!p),F=async a=>{const r=j.includes(a);try{r?(c(t=>t.filter(i=>i!==a)),await o.delete(`/saved-routes/${a}`)):(c(t=>[...t,a]),await o.post("/saved-routes",{route_id:a}))}catch(t){console.error("Error toggling favorite:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),_&&e.jsxs("div",{className:"route-detail-hero",style:{backgroundImage:`url(${M})`},children:[e.jsx("div",{className:"route-detail-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("p",{className:"hero-subtitle py-3",children:"ROUTE DETAIL"}),e.jsx("h1",{className:"hero-title py-2",children:m}),e.jsx("p",{className:"hero-description py-1",children:"This is the individual route page where you can see full details, like the route, and check out user reviews."})]})]}),e.jsx("main",{children:e.jsxs(E,{className:"py-5",children:[e.jsxs(d,{className:"route-info-section",children:[e.jsx(n,{md:5,children:e.jsx("img",{src:h?`/storage/${h}`:S,alt:"Route",className:"route-detail-image w-100"})}),e.jsxs(n,{md:7,className:"d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"route-title mb-0",children:m}),e.jsx("span",{className:"bookmark-circle",title:"Add to favorites",onClick:()=>F(s.id),children:e.jsx("img",{src:j.includes(s.id)?T:B,alt:"bookmark"})})]}),e.jsxs("p",{className:"route-meta",children:["Created by ",e.jsx("strong",{children:((g=s.user)==null?void 0:g.name)??"Unknown"})," on"," ",(f=s.user)!=null&&f.created_at?new Date(s.user.created_at).toLocaleDateString():"Unknown date"]}),s.updated_at&&s.created_at&&s.updated_at!==s.created_at&&e.jsxs("p",{className:"route-meta",children:["Last updated: ",new Date(s.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"route-details-list",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",y]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",N]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," â‚¬",k]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Days:"})," ",b]})]})]}),e.jsxs("div",{className:"like-section mt-auto align-self-end d-flex align-items-center",children:[e.jsx("span",{className:"like-text me-3",children:"Liked: "}),e.jsx("img",{src:p?$:U,alt:"like icon",className:"like-icon",onClick:D,style:{cursor:"pointer"}})]})]})]}),e.jsx(d,{className:"mt-4",children:e.jsx(n,{children:e.jsx("p",{className:"route-description-full",children:v})})}),e.jsx("hr",{className:"my-5"}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"daily-stops-heading",children:"Daily Stops"}),e.jsx(d,{className:"daily-stops-row",children:u.map((a,r)=>{const t=a.places.filter(i=>i.trim()!=="");return t.length===0?null:e.jsx(n,{md:4,className:"mb-4",children:e.jsxs("div",{className:"day-card p-3 h-100",children:[e.jsxs("h5",{className:"mb-3",children:["Day ",r+1]}),e.jsx("ul",{children:t.map((i,L)=>e.jsx("li",{children:i},L))})]})},r)})})]})]})}),e.jsx(R,{})]})}export{W as default};
