import{r as d,j as s,J as T,h as u}from"./app-B08JCjE4.js";import{d as F}from"./dubai-DFB38UtI.js";import{c as i,u as n,a as H}from"./Row-BBC57dDl.js";const N=a=>d.forwardRef((e,r)=>s.jsx("div",{...e,ref:r,className:i(e.className,a)})),x=d.forwardRef(({className:a,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-body"),s.jsx(r,{ref:t,className:i(a,e),...o})));x.displayName="CardBody";const p=d.forwardRef(({className:a,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-footer"),s.jsx(r,{ref:t,className:i(a,e),...o})));p.displayName="CardFooter";const h=d.createContext(null);h.displayName="CardHeaderContext";const v=d.forwardRef(({bsPrefix:a,className:e,as:r="div",...o},t)=>{const c=n(a,"card-header"),l=d.useMemo(()=>({cardHeaderBsPrefix:c}),[c]);return s.jsx(h.Provider,{value:l,children:s.jsx(r,{ref:t,...o,className:i(e,c)})})});v.displayName="CardHeader";const g=d.forwardRef(({bsPrefix:a,className:e,variant:r,as:o="img",...t},c)=>{const l=n(a,"card-img");return s.jsx(o,{ref:c,className:i(r?`${l}-${r}`:l,e),...t})});g.displayName="CardImg";const j=d.forwardRef(({className:a,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-img-overlay"),s.jsx(r,{ref:t,className:i(a,e),...o})));j.displayName="CardImgOverlay";const y=d.forwardRef(({className:a,bsPrefix:e,as:r="a",...o},t)=>(e=n(e,"card-link"),s.jsx(r,{ref:t,className:i(a,e),...o})));y.displayName="CardLink";const S=N("h6"),C=d.forwardRef(({className:a,bsPrefix:e,as:r=S,...o},t)=>(e=n(e,"card-subtitle"),s.jsx(r,{ref:t,className:i(a,e),...o})));C.displayName="CardSubtitle";const k=d.forwardRef(({className:a,bsPrefix:e,as:r="p",...o},t)=>(e=n(e,"card-text"),s.jsx(r,{ref:t,className:i(a,e),...o})));k.displayName="CardText";const I=N("h5"),w=d.forwardRef(({className:a,bsPrefix:e,as:r=I,...o},t)=>(e=n(e,"card-title"),s.jsx(r,{ref:t,className:i(a,e),...o})));w.displayName="CardTitle";const R=d.forwardRef(({bsPrefix:a,className:e,bg:r,text:o,border:t,body:c=!1,children:l,as:f="div",...$},b)=>{const B=n(a,"card");return s.jsx(f,{ref:b,...$,className:i(e,B,r&&`bg-${r}`,o&&`text-${o}`,t&&`border-${t}`),children:c?s.jsx(x,{children:l}):l})});R.displayName="Card";const m=Object.assign(R,{Img:g,Title:w,Subtitle:C,Body:x,Link:y,Text:k,Header:v,Footer:p,ImgOverlay:j}),A="/build/assets/bookmark-default-CQyLYAzh.png",E="/build/assets/bookmark-filled-BHuRqRb-.png",D="/build/assets/heart-8iC9_XJY.png";function _({route:a}){const[e,r]=d.useState([]);d.useEffect(()=>{(async()=>{try{const l=(await u.get("/saved-routes")).data.map(f=>f.route_id);r(l)}catch(c){console.error("Error fetching saved routes:",c)}})()},[]);const o=async t=>{const c=e.includes(t);try{c?(r(l=>l.filter(f=>f!==t)),await u.delete(`/saved-routes/${t}`),console.log("Route removed successfully")):(r(l=>[...l,t]),await u.post("/saved-routes",{route_id:t}),console.log("Route saved successfully"))}catch(l){console.error("Error toggling favorite:",l)}};return s.jsx(H,{xs:"auto",children:s.jsx(T,{href:`/routes/${a.id}`,className:"text-decoration-none text-dark",children:s.jsxs(m,{className:"route-card shadow-sm position-relative mx-auto",children:[s.jsx("div",{className:"bookmark-icon",onClick:t=>{t.preventDefault(),o(a.id)},title:"Add to favorites",children:s.jsx("img",{src:e.includes(a.id)?E:A,alt:"bookmark"})}),s.jsx(m.Img,{variant:"top",src:a.image===null?F:`/storage/${a.image}`,alt:a.image===null?"No Image":a.title,className:"route-image"}),s.jsxs(m.Body,{className:"route-info",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[s.jsx(m.Title,{as:"h6",className:"mb-0 route-title-truncated",children:a.title}),s.jsxs("span",{className:"text-muted small flex-shrink-0",children:[a.days," Days"]})]}),s.jsx(m.Subtitle,{className:"mb-1 text-muted small",children:a.user?`by ${a.user.name}`:"Unknown Author"}),s.jsxs("div",{className:"d-flex justify-content-between align-items-start mt-2",children:[a.description?s.jsx(m.Text,{className:"route-description mb-0 flex-grow-1 me-2 text-truncate",children:a.description}):s.jsx("span",{className:"route-description text-muted small",children:"Â "}),s.jsxs("div",{className:"d-flex align-items-center likes-section ms-2",children:[s.jsx("img",{src:D,alt:"likes",className:"heart-icon me-1"}),s.jsx("span",{className:"small likes-count",children:a.likes})]})]})]})]})})},a.id)}export{_ as R};
