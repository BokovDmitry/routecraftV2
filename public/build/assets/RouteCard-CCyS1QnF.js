import{r as i,j as a,J as h,b as p}from"./app-BK9p-bB3.js";import{f as D,a as E,d as F}from"./dubai-1WBGI7KM.js";import{c,u as n,a as I}from"./Row-D2ynku7b.js";const g=e=>i.forwardRef((s,t)=>a.jsx("div",{...s,ref:t,className:c(s.className,e)})),j=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...o},r)=>(s=n(s,"card-body"),a.jsx(t,{ref:r,className:c(e,s),...o})));j.displayName="CardBody";const v=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...o},r)=>(s=n(s,"card-footer"),a.jsx(t,{ref:r,className:c(e,s),...o})));v.displayName="CardFooter";const y=i.createContext(null);y.displayName="CardHeaderContext";const C=i.forwardRef(({bsPrefix:e,className:s,as:t="div",...o},r)=>{const d=n(e,"card-header"),m=i.useMemo(()=>({cardHeaderBsPrefix:d}),[d]);return a.jsx(y.Provider,{value:m,children:a.jsx(t,{ref:r,...o,className:c(s,d)})})});C.displayName="CardHeader";const k=i.forwardRef(({bsPrefix:e,className:s,variant:t,as:o="img",...r},d)=>{const m=n(e,"card-img");return a.jsx(o,{ref:d,className:c(t?`${m}-${t}`:m,s),...r})});k.displayName="CardImg";const w=i.forwardRef(({className:e,bsPrefix:s,as:t="div",...o},r)=>(s=n(s,"card-img-overlay"),a.jsx(t,{ref:r,className:c(e,s),...o})));w.displayName="CardImgOverlay";const R=i.forwardRef(({className:e,bsPrefix:s,as:t="a",...o},r)=>(s=n(s,"card-link"),a.jsx(t,{ref:r,className:c(e,s),...o})));R.displayName="CardLink";const H=g("h6"),$=i.forwardRef(({className:e,bsPrefix:s,as:t=H,...o},r)=>(s=n(s,"card-subtitle"),a.jsx(t,{ref:r,className:c(e,s),...o})));$.displayName="CardSubtitle";const b=i.forwardRef(({className:e,bsPrefix:s,as:t="p",...o},r)=>(s=n(s,"card-text"),a.jsx(t,{ref:r,className:c(e,s),...o})));b.displayName="CardText";const S=g("h5"),T=i.forwardRef(({className:e,bsPrefix:s,as:t=S,...o},r)=>(s=n(s,"card-title"),a.jsx(t,{ref:r,className:c(e,s),...o})));T.displayName="CardTitle";const B=i.forwardRef(({bsPrefix:e,className:s,bg:t,text:o,border:r,body:d=!1,children:m,as:l="div",...u},f)=>{const N=n(e,"card");return a.jsx(l,{ref:f,...u,className:c(s,N,t&&`bg-${t}`,o&&`text-${o}`,r&&`border-${r}`),children:d?a.jsx(j,{children:m}):m})});B.displayName="Card";const x=Object.assign(B,{Img:k,Title:T,Subtitle:$,Body:j,Link:R,Text:b,Header:C,Footer:v,ImgOverlay:w}),A="/build/assets/heart-8iC9_XJY.png",O="/build/assets/delete-6qmEIWpD.png";function W({route:e,currentUser:s,showControls:t=!1,isMyRoutesPage:o=!1}){const[r,d]=i.useState([]);i.useEffect(()=>{(async()=>{try{const f=(await p.get("/saved-routes")).data.map(N=>N.route_id);d(f)}catch(u){console.error("Error fetching saved routes:",u)}})()},[]);const m=async l=>{const u=r.includes(l);try{u?(d(f=>f.filter(N=>N!==l)),await p.delete(`/saved-routes/${l}`),console.log("Route removed successfully")):(d(f=>[...f,l]),await p.post("/saved-routes",{route_id:l}),console.log("Route saved successfully"))}catch(f){console.error("Error toggling favorite:",f)}};return a.jsx(I,{xs:"auto",children:a.jsx(h,{href:`/routes/${e.id}`,className:"text-decoration-none text-dark",children:a.jsxs(x,{className:`route-card shadow-sm position-relative mx-auto
  ${t?"has-controls":""}
  ${o?"my-routes-card":""}
`,children:[a.jsx("div",{className:"bookmark-icon",onClick:l=>{l.preventDefault(),m(e.id)},title:"Add to favorites",children:a.jsx("img",{src:r.includes(e.id)?D:E,alt:"bookmark"})}),a.jsx(x.Img,{variant:"top",src:e.image===null?F:`/storage/${e.image}`,alt:e.image===null?"No Image":e.title,className:"route-image"}),a.jsxs(x.Body,{className:"route-info",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx(x.Title,{as:"h6",className:"mb-0 route-title-truncated",children:e.title}),a.jsxs("span",{className:"text-muted small flex-shrink-0",children:[e.days," Days"]})]}),a.jsx(x.Subtitle,{className:"mb-1 text-muted small",children:e.user?`by ${e.user.name}`:"Unknown Author"}),a.jsxs("div",{className:"d-flex justify-content-between align-items-start mt-2",children:[e.description?a.jsx(x.Text,{className:"route-description mb-0 flex-grow-1 me-2 text-truncate",children:e.description}):a.jsx("span",{className:"route-description text-muted small",children:"Â "}),a.jsxs("div",{className:"d-flex align-items-center likes-section ms-2",children:[a.jsx("img",{src:A,alt:"likes",className:"heart-icon me-1"}),a.jsx("span",{className:"small likes-count",children:e.likes})]})]}),t&&s&&e.user&&s.id===e.user.id&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 route-actions",children:[a.jsx(h,{href:`/routes/${e.id}/edit`,title:"Edit Route",className:"edit-button",onClick:l=>l.stopPropagation(),children:"Edit"}),a.jsx("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),confirm("Are you sure you want to delete this route?")},title:"Delete Route",className:"icon-button",children:a.jsx("img",{src:O,alt:"Delete",className:"action-icon"})})]})]})]})})},e.id)}export{W as R};
