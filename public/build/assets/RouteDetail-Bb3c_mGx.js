import{r as d,j as e,b as l}from"./app-BUkYBJdy.js";import{N as E}from"./Navbar-CQasr33c.js";import{C as F,R as h,a as n,F as L}from"./Row-BD8xuxxM.js";import{d as A,f as R,a as S}from"./dubai-1WBGI7KM.js";const T="/build/assets/bg25-Oy8WnnqA.jpg",$="/build/assets/heart-default-CIVAMNYc.png",B="/build/assets/heart-filled-Ck3qAr2L.png";function P({route:a}){var f,y;const{image:m,title:x,destination_country:k,destination_city:N,description:v,budget:b,days:w,stops:u}=a,j=Array.isArray(u)?u.map(t=>({places:t})):[],[p,c]=d.useState([]),[_,g]=d.useState(!1),C=async t=>{try{const r=await l.post(`/routes/${t}/like`);g(r.data.liked)}catch(r){console.error("Error toggling like:",r)}};d.useEffect(()=>{const t=async()=>{try{const s=await l.get(`/routes/${a.id}/liked-status`);g(s.data.liked)}catch(s){console.error("Error fetching liked status:",s)}},r=async()=>{try{const i=(await l.get("/saved-routes")).data.map(o=>o.route_id);c(i)}catch(s){console.error("Error fetching saved routes:",s)}};t(),r()},[a.id]);const D=async t=>{const r=p.includes(t);try{r?(c(s=>s.filter(i=>i!==t)),await l.delete(`/saved-routes/${t}`)):(c(s=>[...s,t]),await l.post("/saved-routes",{route_id:t}))}catch(s){console.error("Error toggling favorite:",s)}};return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),isMounted&&e.jsxs("div",{className:"route-detail-hero",style:{backgroundImage:`url(${T})`},children:[e.jsx("div",{className:"route-detail-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("p",{className:"hero-subtitle py-3",children:"ROUTE DETAIL"}),e.jsx("h1",{className:"hero-title py-2",children:x}),e.jsx("p",{className:"hero-description py-1",children:"This is the individual route page where you can see full details, like the route, and check out user reviews."})]})]}),e.jsx("main",{children:e.jsxs(F,{className:"py-5",children:[e.jsxs(h,{className:"route-info-section",children:[e.jsx(n,{md:5,children:e.jsx("img",{src:m?`/storage/${m}`:A,alt:"Route",className:"route-detail-image w-100"})}),e.jsxs(n,{md:7,className:"d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"route-title mb-0",children:x}),e.jsx("span",{className:"bookmark-circle",title:"Add to favorites",onClick:()=>D(a.id),children:e.jsx("img",{src:p.includes(a.id)?R:S,alt:"bookmark"})})]}),e.jsxs("p",{className:"route-meta",children:["Created by ",e.jsx("strong",{children:((f=a.user)==null?void 0:f.name)??"Unknown"})," on"," ",(y=a.user)!=null&&y.created_at?new Date(a.user.created_at).toLocaleDateString():"Unknown date"]}),a.updated_at&&a.created_at&&a.updated_at!==a.created_at&&e.jsxs("p",{className:"route-meta",children:["Last updated: ",new Date(a.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"route-details-list",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",k]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",N]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," â‚¬",b]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Days:"})," ",w]})]})]}),e.jsxs("div",{className:"like-section mt-auto align-self-end d-flex align-items-center",children:[e.jsx("span",{className:"like-text me-3",children:"Liked: "}),e.jsx("img",{src:_?B:$,alt:"like icon",className:"like-icon",onClick:()=>C(a.id),style:{cursor:"pointer"}})]})]})]}),e.jsx(h,{className:"mt-4",children:e.jsx(n,{children:e.jsx("p",{className:"route-description-full",children:v})})}),e.jsx("hr",{className:"my-5"}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"daily-stops-heading",children:"Daily Stops"}),e.jsx(h,{className:"daily-stops-row",children:j.map((t,r)=>{const s=t.places.filter(i=>i.trim()!=="");return s.length===0?null:e.jsx(n,{md:4,className:"mb-4",children:e.jsxs("div",{className:"day-card p-3 h-100",children:[e.jsxs("h5",{className:"mb-3",children:["Day ",r+1]}),e.jsx("ul",{children:s.map((i,o)=>e.jsx("li",{children:i},o))})]})},r)})})]})]})}),e.jsx(L,{})]})}export{P as default};
