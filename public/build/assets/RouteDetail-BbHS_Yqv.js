import{r as d,j as e,b as l}from"./app-x9NBd10d.js";import{N as A}from"./Navbar-B9oUf-78.js";import{C as E,R as c,a as n,F}from"./Row-DStZawAX.js";import{d as L,f as R,a as S}from"./dubai-1WBGI7KM.js";const T="/build/assets/bg25-Oy8WnnqA.jpg",$="/build/assets/heart-default-CIVAMNYc.png",B="/build/assets/heart-filled-Ck3qAr2L.png";function P({route:s}){var g,y;const{image:h,title:m,destination_country:f,destination_city:k,description:N,budget:v,days:b,stops:x}=s,j=Array.isArray(x)?x.map(a=>({places:a})):[];console.log(s);const[p,o]=d.useState([]),[w,u]=d.useState(!1),_=async a=>{try{const r=await l.post(`/routes/${a}/like`);u(r.data.liked)}catch(r){console.error("Error toggling like:",r)}};d.useEffect(()=>{const a=async()=>{try{const t=await l.get(`/routes/${s.id}/liked-status`);u(t.data.liked)}catch(t){console.error("Error fetching liked status:",t)}},r=async()=>{try{const i=(await l.get("/saved-routes")).data.map(D=>D.route_id);o(i)}catch(t){console.error("Error fetching saved routes:",t)}};a(),r()},[s.id]);const C=async a=>{const r=p.includes(a);try{r?(o(t=>t.filter(i=>i!==a)),await l.delete(`/saved-routes/${a}`)):(o(t=>[...t,a]),await l.post("/saved-routes",{route_id:a}))}catch(t){console.error("Error toggling favorite:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),e.jsxs("div",{className:"route-detail-hero",style:{backgroundImage:`url(${T})`},children:[e.jsx("div",{className:"route-detail-hero-overlay"}),e.jsxs("div",{className:"hero-content px-3",children:[e.jsx("p",{className:"hero-subtitle py-3",children:"ROUTE DETAIL"}),e.jsx("h1",{className:"hero-title py-2",children:m}),e.jsx("p",{className:"hero-description py-1",children:"This is the individual route page where you can see full details, like the route, and check out user reviews."})]})]}),e.jsx("main",{children:e.jsxs(E,{className:"py-5",children:[e.jsxs(c,{className:"route-info-section",children:[e.jsx(n,{md:5,children:e.jsx("img",{src:h?`/storage/${h}`:L,alt:"Route",className:"route-detail-image w-100"})}),e.jsxs(n,{md:7,className:"d-flex flex-column justify-content-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"route-title mb-0",children:m}),e.jsx("span",{className:"bookmark-circle",title:"Add to favorites",onClick:()=>C(s.id),children:e.jsx("img",{src:p.includes(s.id)?R:S,alt:"bookmark"})})]}),e.jsxs("p",{className:"route-meta",children:["Created by ",e.jsx("strong",{children:((g=s.user)==null?void 0:g.name)??"Unknown"})," on"," ",(y=s.user)!=null&&y.created_at?new Date(s.user.created_at).toLocaleDateString():"Unknown date"]}),s.updated_at&&s.created_at&&s.updated_at!==s.created_at&&e.jsxs("p",{className:"route-meta",children:["Last updated: ",new Date(s.updated_at).toLocaleDateString()]}),e.jsxs("div",{className:"route-details-list",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Country:"})," ",f]}),e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",k]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," â‚¬",v]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Days:"})," ",b]})]})]}),e.jsxs("div",{className:"like-section mt-auto align-self-end d-flex align-items-center",children:[e.jsx("span",{className:"like-text me-3",children:"Liked: "}),e.jsx("img",{src:w?B:$,alt:"like icon",className:"like-icon",onClick:()=>_(s.id),style:{cursor:"pointer"}})]})]})]}),e.jsx(c,{className:"mt-4",children:e.jsx(c,{className:"mt-4",children:e.jsx(n,{children:e.jsx("p",{className:"route-description-full",children:N})})})}),e.jsx("hr",{className:"my-5"}),j.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"daily-stops-heading",children:"Daily Stops"}),e.jsx(c,{className:"daily-stops-row",children:j.map((a,r)=>e.jsx(n,{md:4,className:"mb-4",children:e.jsxs("div",{className:"day-card p-3 h-100",children:[e.jsxs("h5",{className:"mb-3",children:["Day ",r+1]}),e.jsx("ul",{children:Array.isArray(a.places)&&a.places.map((t,i)=>e.jsx("li",{children:t},i))})]})},r))})]})]})}),e.jsx(F,{})]})}export{P as default};
