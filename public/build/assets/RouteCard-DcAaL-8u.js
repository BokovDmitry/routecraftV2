import{r as d,j as a,J as T,h as u}from"./app-1Q-f3pKR.js";import{C as F}from"./Row-BJpi8IQa.js";import{c as i,u as n}from"./Container-DpGhmHkg.js";const N=s=>d.forwardRef((e,r)=>a.jsx("div",{...e,ref:r,className:i(e.className,s)})),x=d.forwardRef(({className:s,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-body"),a.jsx(r,{ref:t,className:i(s,e),...o})));x.displayName="CardBody";const p=d.forwardRef(({className:s,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-footer"),a.jsx(r,{ref:t,className:i(s,e),...o})));p.displayName="CardFooter";const g=d.createContext(null);g.displayName="CardHeaderContext";const h=d.forwardRef(({bsPrefix:s,className:e,as:r="div",...o},t)=>{const c=n(s,"card-header"),l=d.useMemo(()=>({cardHeaderBsPrefix:c}),[c]);return a.jsx(g.Provider,{value:l,children:a.jsx(r,{ref:t,...o,className:i(e,c)})})});h.displayName="CardHeader";const j=d.forwardRef(({bsPrefix:s,className:e,variant:r,as:o="img",...t},c)=>{const l=n(s,"card-img");return a.jsx(o,{ref:c,className:i(r?`${l}-${r}`:l,e),...t})});j.displayName="CardImg";const v=d.forwardRef(({className:s,bsPrefix:e,as:r="div",...o},t)=>(e=n(e,"card-img-overlay"),a.jsx(r,{ref:t,className:i(s,e),...o})));v.displayName="CardImgOverlay";const y=d.forwardRef(({className:s,bsPrefix:e,as:r="a",...o},t)=>(e=n(e,"card-link"),a.jsx(r,{ref:t,className:i(s,e),...o})));y.displayName="CardLink";const H=N("h6"),C=d.forwardRef(({className:s,bsPrefix:e,as:r=H,...o},t)=>(e=n(e,"card-subtitle"),a.jsx(r,{ref:t,className:i(s,e),...o})));C.displayName="CardSubtitle";const k=d.forwardRef(({className:s,bsPrefix:e,as:r="p",...o},t)=>(e=n(e,"card-text"),a.jsx(r,{ref:t,className:i(s,e),...o})));k.displayName="CardText";const S=N("h5"),w=d.forwardRef(({className:s,bsPrefix:e,as:r=S,...o},t)=>(e=n(e,"card-title"),a.jsx(r,{ref:t,className:i(s,e),...o})));w.displayName="CardTitle";const R=d.forwardRef(({bsPrefix:s,className:e,bg:r,text:o,border:t,body:c=!1,children:l,as:f="div",...b},$)=>{const B=n(s,"card");return a.jsx(f,{ref:$,...b,className:i(e,B,r&&`bg-${r}`,o&&`text-${o}`,t&&`border-${t}`),children:c?a.jsx(x,{children:l}):l})});R.displayName="Card";const m=Object.assign(R,{Img:j,Title:w,Subtitle:C,Body:x,Link:y,Text:k,Header:h,Footer:p,ImgOverlay:v}),I="/build/assets/bookmark-default-CQyLYAzh.png",A="/build/assets/bookmark-filled-BHuRqRb-.png",E="/build/assets/dubai-5gdlS4cn.jpg",D="/build/assets/heart-8iC9_XJY.png";function _({route:s}){const[e,r]=d.useState([]);d.useEffect(()=>{(async()=>{try{const l=(await u.get("/saved-routes")).data.map(f=>f.route_id);r(l)}catch(c){console.error("Error fetching saved routes:",c)}})()},[]);const o=async t=>{const c=e.includes(t);try{c?(r(l=>l.filter(f=>f!==t)),await u.delete(`/saved-routes/${t}`),console.log("Route removed successfully")):(r(l=>[...l,t]),await u.post("/saved-routes",{route_id:t}),console.log("Route saved successfully"))}catch(l){console.error("Error toggling favorite:",l)}};return a.jsx(F,{xs:"auto",children:a.jsx(T,{href:`/routes/${s.id}`,className:"text-decoration-none text-dark",children:a.jsxs(m,{className:"route-card shadow-sm position-relative mx-auto",children:[a.jsx("div",{className:"bookmark-icon",onClick:t=>{t.preventDefault(),o(s.id)},title:"Add to favorites",children:a.jsx("img",{src:e.includes(s.id)?A:I,alt:"bookmark"})}),a.jsx(m.Img,{variant:"top",src:s.image===null?E:`/storage/${s.image}`,alt:s.image===null?"No Image":s.title,className:"route-image"}),a.jsxs(m.Body,{className:"route-info",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[a.jsx(m.Title,{as:"h6",className:"mb-0 route-title-truncated",children:s.title}),a.jsxs("span",{className:"text-muted small flex-shrink-0",children:[s.days," Days"]})]}),a.jsx(m.Subtitle,{className:"mb-1 text-muted small",children:s.user?`by ${s.user.name}`:"Unknown Author"}),a.jsxs("div",{className:"d-flex justify-content-between align-items-start mt-2",children:[s.description?a.jsx(m.Text,{className:"route-description mb-0 flex-grow-1 me-2 text-truncate",children:s.description}):a.jsx("span",{className:"route-description text-muted small",children:"Â "}),a.jsxs("div",{className:"d-flex align-items-center likes-section ms-2",children:[a.jsx("img",{src:D,alt:"likes",className:"heart-icon me-1"}),a.jsx("span",{className:"small likes-count",children:s.likes})]})]})]})]})})},s.id)}export{_ as R};
